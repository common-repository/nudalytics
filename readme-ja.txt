====================================================================================================

プラグイン名: Nudalytics
作者: AJI Dreamtaste (まぼろしのあじ)
ライセンス: GNU General Public License
最終記述日: 2012/12/10

Copyright (C) 2012 AJI Dreamtaste (まぼろしのあじ). All rights reserved.

====================================================================================================


----- 1. 説明 --------------------------------------------------------------------------------------
当プラグインでは、ビジターの情報を記録し、数値を統計化できる。
記録する際、Nudalytics/filterおよびNudalytics/identifyディレクトリ内の.datファイルを編集することで
記録の可否や、識別情報を付与が可能。
また、マルチユーザのWordPressサイト、およびセキュリティチェック用に管理ページの操作遷移も表示する。


----- 2. メニューと見方 ----------------------------------------------------------------------------
1. Summary(表示レベル: 0)
	最近の統計結果をリアルタイムでグラフ化、日毎および曜日に表示する

2. Realtime
	リアルタイムでビジターの情報と、訪問先URLを一覧化
	Referrer項目について、各色に分けて表示させている
	青: 検索エンジンから流入（検索クエリも表示）
	緑: ページ遷移
	赤: リファラスパムの可能性あり

3. Referrer
	他サイトのリンクからの流入者を一覧化

4. Search query
	（searchquery.datを参照して）検索エンジンからの流入者を検索クエリとともに一覧化
	※なお、Google検索エンジンからの流入ではクッションページにより結構な頻度で検索クエリを取得できないです。

5. Crawlers
	(crawler_*.datを参照して)各クローラの訪問を一覧化

6. Movement in Admin
	WordPress管理ページ内のアクセス遷移を表示
	基本表示されるIPは固定されるはずだが、見慣れないIPからクラックされているかチェックできる（かも）

7. Search logs
	保存されているログから、検索範囲を指定して特定文字列を検索、表示

8. Settings(表示レベル: 8)
	Summary内の統計表示期間の指定、リアルタイムのログ数、ログの保存期間を指定
	2~7にあるサブメニューの表示･非表示の設定


----- 3. 操作方法 ----------------------------------------------------------------------------------
操作できるメニューはSummaryの指標、およびSettings内の項目が該当する。

Summaryの指標
	（メインインジケータ）/（サブインジケータ）
	指標は以下7~8つから選択できる
	1. (none)                       //指標を使用しない（BLUEメインインジケータのみ選択不可）
	2. Unique user                  //（クローラを除く）ユニークユーザ数
	3. Page view                    //（クローラを除く）ページビュー数
	4. Processing time              //（クローラを除く）Webページの表示処理時間
	5. Crawler visit                //クローラ訪問数
	6. All unique IP                //クローラ含む全IPアドレスの数
	7. Page view (+Crawler visit)   //クローラ含むページビュー数
	
	上記の指標をそのままグラフ化させるには、サブインジケータに(none)を設定する必要がある。
	メインおよびサブインジケータに指標を設定して、値*100[%]として表示させることができる。

Settingsの項目
	How terms display in summary graphs [day]
		サマリ内グラフで表示する統計期間（現在から～日前）
	Number of Logs in Realtime [line]
		Realtime項目で表示させるログ数、1000にしたところ表示におおよそ1秒かかる
	Retention Periods of Data [day]
		データ保持期間、指定日数を超えたデータは自動で削除される
		0にするとこのプラグインの意味がなくなっちゃう・・・


----- 4. 判別について ------------------------------------------------------------------------------
以下、http://nimbusnoize.com/works/nudalyticsと同様に記述する。

データの判別は、"Nudalytics/filter"および"Nudalytics/identify"ディレクトリ内にある
.datファイルによってなされる。”Nudalytics/filter”ディレクトリ内のファイルは、対象の記録をさせないために記述する。
逆に、"Nudalytics/identify"ディレクトリ内では、対象に新たな識別データを与えるためのものとしている。
StatPressユーザにも認識しやすいよう、それに準拠して指定した。
.datファイルの記述方法について、以下に例を示す。

Nudalytics/filter
	ip.dat:
		単一IPアドレスの指定では、
		[ex]192.168.0.1
		範囲指定では、2つのIPアドレスの間に"-"を記述
		[ex]192.168.0.1-192.168.255.255
	host.dat
		ホスト名またはその一部を記述
		[ex]hogehoge.hogehoge
	useragent.dat
		UAまたはその一部を記述
		[ex]Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
				//IE6のUser Agentのみ記録させない
		    MSIE
		    	//この場合だと、Tridentレンダリングエンジン全般を記録させない記述方式になる
	referer.dat
		リファラとして記録されるURL、またはその一部を記述

Nudalytics/identifyでは、識別データ付与のために”|”を使って区別している
	browser.dat:
		ブラウザ名|UA文字列の一部
	crawler_ip.dat:
		クローラ名|IPアドレス
		IPアドレスの記述方式は、ip.datと同様
	crawler_ua.dat:
		クローラ名|UA文字列の一部
	os.dat:
		OS名|UA文字列の一部
	searchquery.dat:
		検索エンジン名|検索エンジンのURL|検索クエリ判別文字列（q=とかなんとか）